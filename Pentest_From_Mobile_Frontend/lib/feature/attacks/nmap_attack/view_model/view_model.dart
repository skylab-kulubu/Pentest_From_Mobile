import 'package:dio/dio.dart';
import 'package:mobile_pentest/feature/attacks/nmap_attack/service/loading.dart';
import 'package:mobile_pentest/feature/attacks/nmap_attack/service/service_requests.dart';

import '../model/nmap_model.dart';
import '../view/nmap_result_view.dart';
import 'dio/dio_mixin.dart';

abstract class NmapViewModel extends OnLoading<NmapResultView> with NmapDioMixin {
  List<Result>? nmapResults = [];

  late final IServiceRequests nmapServiceRequests;

  @override
  void initState() {
    super.initState();
    nmapServiceRequests = NmapServiceRequests(Dio());
    _fetchNmapResults();
  }

  void _fetchNmapResults() async {
    changeLoading();
    nmapResults = (await nmapServiceRequests.fetchNmapResults())?.result ?? [];
    changeLoading();
  }
}
